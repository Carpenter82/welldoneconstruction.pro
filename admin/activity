<script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbyN1uUGRDmEYax-dyv5VB5xpzYGfKdQ8by-uMq82eBBUFjk3ETj9juCd9ax6E5IzWMt/exec';

  async function loadActivity() {
    try {
      const resp = await fetch(`${scriptURL}?action=getActivity`);
      const logs = await resp.json();
      const container = document.getElementById('activityLog');
      // Reversing the array so newest check-ins appear first
      container.innerHTML = logs.reverse().map(l => `
        <div class="worker-card" style="border-left: 5px solid #343E47; margin-bottom:10px; padding:15px; background:white;">
          <strong style="color:#33B26E;">${l.email}</strong><br>
          <small>${new Date(l.timestamp).toLocaleString()}</small><br>
          <a href="${l.mapLink}" target="_blank" style="display:inline-block; margin-top:8px; text-decoration:none; font-weight:bold;">üìç View Map Location</a>
        </div>
      `).join('');
    } catch (e) {
      document.getElementById('activityLog').innerText = "Failed to load logs.";
    }
  }
  window.onload = loadActivity;
</script>
