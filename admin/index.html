<!DOCTYPE html>
<html>
<head><link rel="stylesheet" href="../styles.css"><title>Admin</title></head>
<body>
<div class="container" style="max-width:800px;">
    <h2>Admin Command Center</h2>
    <table>
        <thead><tr><th>Name</th><th>Trade</th><th>Tier</th><th>Action</th></tr></thead>
        <tbody id="t"></tbody>
    </table>
</div>
<script>
    const scriptURL = 'YOUR_DEPLOY_URL';
    async function load() {
        const r = await fetch(`${scriptURL}?action=getApplicants`);
        const d = await r.json();
        document.getElementById('t').innerHTML = d.map(a => `
            <tr><td>${a.name}</td><td>${a.trade}</td><td>${a.tier}</td>
            <td><button onclick="hire('${a.email}')" ${a.tier === 'TBD' ? 'disabled' : ''}>ACTIVATE</button></td></tr>`).join('');
    }
    async function hire(email) {
        await fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify({action:'hireWorker', email}) });
        alert("Worker Activated."); load();
    }
    window.onload = load;
</script>
</body>
</html>
