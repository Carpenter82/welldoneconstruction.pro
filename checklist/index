<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employee Checklist</title>
  <link rel="stylesheet" href="../styles.css">
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 40px auto; }
    h1 { text-align: center; }
    ul { list-style-type: none; padding: 0; }
    li { margin: 10px 0; }
    input[type="checkbox"] { margin-right: 10px; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 16px; }
    .success { color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Employee Checklist</h1>
  <p>Please check all completed tasks and click "Submit" when finished.</p>

  <ul id="checklist">
    <li><input type="checkbox"> Review safety procedures</li>
    <li><input type="checkbox"> Inspect materials</li>
    <li><input type="checkbox"> Set up workspace</li>
    <li><input type="checkbox"> Read company policies</li>
    <li><input type="checkbox"> Complete onboarding forms</li>
  </ul>

  <button id="submitBtn">Submit</button>
  <p id="confirmation" class="success" style="display:none;">Checklist submitted!</p>

 <script>
  const submitBtn = document.getElementById('submitBtn');
  const confirmation = document.getElementById('confirmation');

  submitBtn.addEventListener('click', () => {
    const checklistItems = document.querySelectorAll('#checklist input[type="checkbox"]');
    const tasks = [];
    checklistItems.forEach(item => {
      tasks.push({
        task: item.parentElement.textContent.trim(),
        done: item.checked
      });
    });

    // POST to Apps Script Web App
    fetch("https://script.google.com/macros/s/AKfycbxfCfxmqIWsS1oqN9FlIW_qaywU1pszRqRuNiLVbEkzNXvZ45RACgPy_OhM_x8FhID_/exec", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        employee: "Test Employee",  // Replace with dynamic value if needed
        tasks: tasks
      })
    })
    .then(response => response.json())
    .then(data => {
      console.log(data);
      confirmation.style.display = 'block';
      submitBtn.disabled = true;
    })
    .catch(error => console.error('Error:', error));
  });
</script>

</body>
</html>

