<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worker Application | Well Done Construction</title>
    <style>
        :root { --wd-green: #33B26E; --wd-dark: #343E47; --wd-bg: #F4F7F6; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: var(--wd-bg); color: var(--wd-dark); margin: 0; padding: 20px; }
        .form-container { max-width: 700px; margin: 20px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-top: 8px solid var(--wd-green); }
        h1 { text-align: center; margin-bottom: 5px; }
        p.subtitle { text-align: center; color: #666; margin-bottom: 25px; }
        .section-title { background: #eee; padding: 10px; margin-top: 20px; font-weight: bold; border-left: 4px solid var(--wd-green); }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .submit-btn { background: var(--wd-green); color: white; border: none; padding: 20px; width: 100%; border-radius: 4px; font-weight: bold; margin-top: 30px; cursor: pointer; font-size: 1.2rem; transition: background 0.3s; }
        .submit-btn:hover { background: #288c56; }
        .submit-btn:disabled { background: #ccc; cursor: not-allowed; }
        #successMessage { display: none; text-align: left; }
    </style>
</head>
<body>

<div class="form-container">
    <div id="formFields">
        <h1>Worker Intake Form</h1>
        <p class="subtitle">Well Done Construction - Reno/Sparks, NV</p>
        
        <form id="intakeForm">
            <div class="section-title">Personal Information</div>
            <div class="grid">
                <div>
                    <label>First Name</label>
                    <input type="text" id="firstName" required>
                </div>
                <div>
                    <label>Last Name</label>
                    <input type="text" id="lastName" required>
                </div>
            </div>

            <div class="grid">
                <div>
                    <label>Phone Number</label>
                    <input type="tel" id="phone" required>
                </div>
                <div>
                    <label>Email Address</label>
                    <input type="email" id="email" required>
                </div>
            </div>

            <div class="section-title">Trade & Experience</div>
            <label>Primary Trade</label>
            <input type="text" id="trade" required>

            <div class="grid">
                <div>
                    <label>Years of Experience</label>
                    <input type="number" id="yearsExp">
                </div>
                <div>
                    <label>Desired Hourly Rate ($)</label>
                    <input type="number" id="payExpectation">
                </div>
            </div>

            <label>Tools / Transportation</label>
            <select id="toolsTransport">
                <option value="Both">I have tools and a truck/car</option>
                <option value="Tools Only">Tools only</option>
                <option value="Transport Only">Transportation only</option>
                <option value="Neither">Neither</option>
            </select>

            <label>Certifications</label>
            <textarea id="certs" rows="2"></textarea>

            <button type="submit" id="submitBtn" class="submit-btn">Submit My Application</button>
        </form>
    </div>

    <div id="successMessage">
        <div style="font-family: Arial, Helvetica, sans-serif; font-size: 15px; line-height: 1.6; color: #000;">
          <p><strong>Admission Submitted</strong></p>
          <p>Thank you. Your information has been received.</p>
          <p><strong>Next Step: DocHub Signature</strong></p>
          <p>Check your email for the <strong>On-Call Employee Agreement</strong>.</p>
          <p>â€”<br><strong>Well Done Construction LLC</strong></p>
        </div>
    </div>
</div>

<script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbyqdgARBMulJ1ZsPQz9uQaFiCURJ5fzheRm7UxOk9ets8YfoIzfLHR7fRPvbBPL0xdd/exec"; 
    
    const form = document.getElementById('intakeForm');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', e => {
        e.preventDefault();
        btn.disabled = true;
        btn.innerText = "Submitting...";

        const payload = {
            type: "ADMISSION", 
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            trade: document.getElementById('trade').value,
            yearsExp: document.getElementById('yearsExp').value,
            pay: document.getElementById('payExpectation').value,
            tools: document.getElementById('toolsTransport').value,
            certs: document.getElementById('certs').value
        };

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors', 
            headers: { 'Content-Type': 'text/plain;charset=utf-8' },
            body: JSON.stringify(payload)
        })
        .then(() => {
            document.getElementById('formFields').style.display = 'none';
            document.getElementById('successMessage').style.display = 'block';
            window.scrollTo(0, 0);
        })
        .catch(error => {
            console.error('Error!', error.message);
            alert("Something went wrong. Please try again.");
            btn.disabled = false;
            btn.innerText = "Submit My Application";
        });
    });
</script>
</body>
</html>
