<script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbyqdgARBMulJ1ZsPQz9uQaFiCURJ5fzheRm7UxOk9ets8YfoIzfLHR7fRPvbBPL0xdd/exec"; 
    
    const form = document.getElementById('intakeForm');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', e => {
        e.preventDefault();
        btn.disabled = true;
        btn.innerText = "Submitting...";

        const payload = {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            trade: document.getElementById('trade').value,
            yearsExp: document.getElementById('yearsExp').value,
            pay: document.getElementById('payExpectation').value,
            tools: document.getElementById('toolsTransport').value,
            certs: document.getElementById('certs').value
        };

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors', 
            body: JSON.stringify(payload)
        })
        .then(() => {
            document.getElementById('formFields').style.display = 'none';
            document.getElementById('successMessage').style.display = 'block';
            window.scrollTo(0, 0);
        })
        .catch(error => {
            console.error('Error!', error.message);
            btn.disabled = false;
            btn.innerText = "Submit My Application";
        });
    });
</script>
