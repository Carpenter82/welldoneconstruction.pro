<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Intake | Well Done Construction</title>
<style>
  :root { --wd-green: #33B26E; --wd-dark: #343E47; --wd-bg: #F4F7F6; }
  body { font-family: 'Segoe UI', Arial, sans-serif; background-color: var(--wd-bg); color: var(--wd-dark); margin: 0; padding: 20px; }
  .form-container { max-width: 600px; margin: 40px auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-top: 5px solid var(--wd-green); }
  h1 { text-align: center; color: var(--wd-dark); }
  label { display: block; margin-top: 15px; font-weight: bold; }
  input { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
  .submit-btn { background: var(--wd-green); color: white; border: none; padding: 15px; width: 100%; border-radius: 4px; font-weight: bold; margin-top: 25px; cursor: pointer; font-size: 1.1rem; }
  .submit-btn:disabled { background: #ccc; }
</style>
</head>
<body>

<div class="form-container">
  <h1>Worker Intake Form</h1>
  <form id="intakeForm">
    <label>First Name</label>
    <input type="text" id="firstName" name="firstName" required>
    
    <label>Last Name</label>
    <input type="text" id="lastName" name="lastName" required>
    
    <label>Email Address</label>
    <input type="email" id="email" name="email" required>
    
    <label>Phone Number</label>
    <input type="tel" id="phone" name="phone" required>
    
    <label>Upload ID / License (Photo or PDF)</label>
    <input type="file" id="idFile" name="idFile" accept="image/*,.pdf" required>
    
    <button type="submit" id="submitBtn" class="submit-btn">Complete My Employee Packet</button>
  </form>
</div>

<script>
  // THE ENGINE LINK
  const scriptURL = "https://script.google.com/macros/s/AKfycbx_YOUR_ENGINE_ID/exec"; 

  const form = document.getElementById('intakeForm');
  const btn = document.getElementById('submitBtn');

  form.addEventListener('submit', e => {
    e.preventDefault();
    btn.disabled = true;
    btn.innerText = "Processing...";

    const fileInput = document.getElementById('idFile');
    const file = fileInput.files[0];
    const reader = new FileReader();

    reader.onload = function(event) {
      const base64 = event.target.result.split(',')[1];
      
      const payload = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        idImage: base64,
        fileName: file.name
      };

      fetch(scriptURL, {
        method: 'POST',
        mode: 'no-cors',
        body: JSON.stringify(payload)
      })
      .then(response => {
        // ONCE SUBMITTED, MOVE TO THE SUCCESS PAGE
        window.location.href = "https://welldoneconstruction.pro/application-received/";
      })
      .catch(error => {
        alert("Submission Error. Please try again.");
        btn.disabled = false;
        btn.innerText = "Complete My Employee Packet";
      });
    };

    reader.readAsDataURL(file);
  });
</script>

</body>
</html>
