<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding | Well Done Construction</title>
    <style>
        :root { --wd-green: #33B26E; --wd-dark: #343E47; --wd-bg: #F4F7F6; }
        body { font-family: 'Segoe UI', Arial, sans-serif; line-height: 1.6; background-color: var(--wd-bg); color: var(--wd-dark); padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-top: 10px solid var(--wd-green); }
        .role-box { background: #f9f9f9; padding: 20px; border: 1px solid #ddd; border-radius: 5px; margin: 20px 0; }
        .btn { display: inline-block; background: var(--wd-green); color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 20px; cursor: pointer; border: none; font-size: 1.1rem; width: 100%; }
        input[type="file"] { margin: 15px 0; width: 100%; padding: 10px; border: 1px dashed #ccc; }
    </style>
</head>
<body>

<div class="container">
    <h1>Official Intake & ID Verification</h1>
    <p><strong>Well Done Construction LLC</strong></p>

    <div class="role-box">
        <p>This role is a W-2, at-will, on-call position. Starting at <strong>$20/hr</strong>. Continued work is based on availability, performance, and company needs.</p>
        <p><strong>Expectations:</strong> Report on time, use proper PPE, and maintain professional conduct on all job sites.</p>
    </div>

    <div class="id-section">
        <h3>Identity Verification</h3>
        <p>Please upload a clear photo of your Driverâ€™s License or State ID. This is required to initialize your worker portal and payroll.</p>
        
        <form id="onboardingForm">
            <input type="file" id="idUpload" accept="image/*" required>
            <button type="submit" id="submitBtn" class="btn">Submit ID & Complete Onboarding</button>
        </form>
    </div>
</div>

<script>
    const scriptURL = 'YOUR_APPS_SCRIPT_URL'; // Points to JobFolderAutoCreate_Email
    const form = document.getElementById('onboardingForm');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', e => {
        e.preventDefault();
        btn.disabled = true;
        btn.innerText = "Processing...";

        const file = document.getElementById('idUpload').files[0];
        const reader = new FileReader();

        reader.onload = function(event) {
            const base64 = event.target.result.split(',')[1];
            
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify({
                    idImage: base64,
                    fileName: file.name,
                    action: 'onboarding'
                })
            })
            .then(() => {
                // REDIRECT TO THANK YOU PAGE
                window.location.href = "https://welldoneconstruction.pro/thank-you.html";
            });
        };
        reader.readAsDataURL(file);
    });
</script>
</body>
</html>
